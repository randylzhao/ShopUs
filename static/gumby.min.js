!function(t){"use strict";function e(){this.$dom=t(document),this.$html=this.$dom.find("html"),this.isOldie=!!this.$html.hasClass("oldie"),this.click="click",this.onReady=this.onOldie=this.onTouch=!1,this.autoInit="false"===t("script[gumby-init]").attr("gumby-init")?!1:!0,this.debugMode=Boolean(t("script[gumby-debug]").length),this.touchDevice=!!(Modernizr.touch||window.navigator.userAgent.indexOf("Windows Phone")>0),this.gumbyTouch=!1,this.touchEvents="js/libs",this.breakpoint=Number(t("script[gumby-breakpoint]").attr("gumby-breakpoint"))||768,this.touchEventsLoaded=!1,this.uiModulesReady=!1,this.uiModules={},this.inits={};var e=t("script[gumby-touch]").attr("gumby-touch"),i=t("script[gumby-path]").attr("gumby-path");"false"===e?this.touchEvents=!1:e?this.touchEvents=e:i&&(this.touchEvents=i),this.touchDevice&&(this.click+=" tap"),this.touchDevice&&t(window).width()<this.breakpoint?(this.$html.addClass("gumby-touch"),this.gumbyTouch=!0):this.$html.addClass("gumby-no-touch"),this.debugMode&&this.debug("Gumby is in debug mode")}e.prototype.init=function(t){var e=this,i=t?t:{};return this.$dom.ready(function(){i.debug&&(e.debugMode=!0),e.debug("Initializing Gumby");var t=i.uiModules?i.uiModules:!1;e.initUIModules(t),e.onReady&&e.onReady(),e.isOldie&&e.onOldie&&e.onOldie(),Modernizr.touch&&e.onTouch&&e.onTouch()}),this},e.prototype.helpers=function(){this.onReady&&this.onReady(),this.isOldie&&this.onOldie&&this.onOldie(),Modernizr.touch&&this.onTouch&&this.onTouch()},e.prototype.ready=function(t){return t&&"function"==typeof t&&(this.onReady=t),this},e.prototype.oldie=function(t){return t&&"function"==typeof t&&(this.onOldie=t),this},e.prototype.touch=function(t){return t&&"function"==typeof t&&(this.onTouch=t),this},e.prototype.console=function(t,e){this.debugMode&&window.console&&console[console[t]?t:"log"](e.length>1?Array.prototype.slice.call(e):e[0])},e.prototype.log=function(){this.console("log",arguments)},e.prototype.debug=function(){this.console("debug",arguments)},e.prototype.warn=function(){this.console("warn",arguments)},e.prototype.error=function(){this.console("error",arguments)},e.prototype.dump=function(){return{$dom:this.$dom,isOldie:this.isOldie,touchEvents:this.touchEvents,debugMode:this.debugMode,autoInit:this.autoInit,uiModules:this.uiModules,click:this.click}},e.prototype.selectAttr=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t],i="data-"+arguments[t],n="gumby-"+arguments[t];if(this.is("["+i+"]"))return this.attr(i)?this.attr(i):!0;if(this.is("["+n+"]"))return this.attr(n)?this.attr(n):!0;if(this.is("["+e+"]"))return this.attr(e)?this.attr(e):!0}return!1},e.prototype.addInitalisation=function(t,e){this.inits[t]=e},e.prototype.initialize=function(t,e){if("object"==typeof t){var i=0;for(i;i<t.length;i++)this.inits[t[i]]&&"function"==typeof this.inits[t[i]]?this.inits[t[i]](e):this.error("Error initializing module: "+t[i])}else this.inits[t]&&"function"==typeof this.inits[t]?this.inits[t](e):this.error("Error initializing module: "+t);return this},e.prototype.UIModule=function(t){var e=t.module;this.uiModules[e]=t},e.prototype.initUIModules=function(t){var e,i,n=this.uiModules;t&&(n=t);for(e in n)i=t?n[e]:e,this.uiModules[i].init()},window.Gumby=new e}(jQuery),!function(t){"use strict";function e(e){Gumby.debug("Initializing Retina",e),this.$el=e,this.imageSrc=this.$el.attr("src"),this.retinaSrc=this.fetchRetinaImage(),this.$retinaImg=t(new Image);var i=this;return this.retinaSrc?(this.$retinaImg.attr("src",this.retinaSrc).load(function(){i.retinaImageLoaded()}).error(function(){Gumby.error("Couln't load retina image: "+i.retinaSrc)}),void 0):!1}e.prototype.fetchRetinaImage=function(){var t=this.imageSrc,e=this.imageSrc.search(/(\.|\/)(gif|jpe?g|png)$/i);return 0>e?!1:t.substr(0,e)+"@2x"+t.substr(e,t.length)},e.prototype.retinaImageLoaded=function(){Gumby.debug("Swapping image for retina version",this.$el),Gumby.debug("Triggering onRetina event",this.$el),this.$el.attr("src",this.$retinaImg.attr("src")).trigger("gumby.onRetina")},Gumby.addInitalisation("retina",function(){!window.devicePixelRatio||window.devicePixelRatio<=1||t("img[data-retina],img[gumby-retina],img[retina]").each(function(){var i=t(this);return i.data("isRetina")?!0:(i.data("isRetina",!0),new e(i),void 0)})}),Gumby.UIModule({module:"retina",events:["onRetina"],init:function(){Gumby.initialize("retina")}})}(jQuery),!function(t){"use strict";function e(e){this.$el=t(e),this.targets=[],this.on="",this.className="",this.self=!1,this.$el.length&&(Gumby.debug("Initializing Toggle",e),this.init())}function i(e){this.$el=t(e),this.targets=[],this.on="",this.className="",this.self=!1,this.$el.length&&(Gumby.debug("Initializing Switch",e),this.init())}e.prototype.init=function(){var t=this;this.setup(),this.$el.on(this.on,function(e){e.preventDefault(),t.trigger(t.triggered)}).on("gumby.trigger",function(){Gumby.debug("Trigger event triggered",t.$el),t.trigger(t.triggered)}).on("gumby.initialize",function(){Gumby.debug("Re-initializing "+t.constructor,$el),t.setup()})},e.prototype.setup=function(){this.targets=this.parseTargets(),this.on=Gumby.selectAttr.apply(this.$el,["on"])||Gumby.click,this.className=Gumby.selectAttr.apply(this.$el,["classname"])||"active",this.self="false"===Gumby.selectAttr.apply(this.$el,["self"])},e.prototype.parseTargets=function(){var e=Gumby.selectAttr.apply(this.$el,["trigger"]),i=0,n=[];return e?(i=e.indexOf("|"),-1===i?this.checkTargets([e])?[t(e)]:!1:(n=e.split("|"),this.checkTargets(n)?n.length>1?[t(n[0]),t(n[1])]:[t(n[0])]:!1)):!1},e.prototype.checkTargets=function(e){var i=0;for(i;i<e.length;i++)if(e[i]&&!t(e[i]).length)return Gumby.error("Cannot find "+this.constructor.name+" target: "+e[i]),!1;return!0},e.prototype.triggered=function(){Gumby.debug("Triggering onTrigger event",this.$el),this.$el.trigger("gumby.onTrigger",[this.$el.hasClass(this.className)])},i.prototype=new e,i.prototype.constructor=i,e.prototype.trigger=function(t){Gumby.debug("Triggering Toggle",this.$el);var e;this.targets?1==this.targets.length?this.$el.add(this.targets[0]).toggleClass(this.className):this.targets.length>1&&(this.targets[0].hasClass(this.className)?(e=this.targets[0],this.self||(e=e.add(this.$el)),e.removeClass(this.className),this.targets[1].addClass(this.className)):(e=this.targets[0],this.self||(e=e.add(this.$el)),e.addClass(this.className),this.targets[1].removeClass(this.className))):this.$el.toggleClass(this.className),t&&"function"==typeof t&&t.apply(this)},i.prototype.trigger=function(t){Gumby.debug("Triggering Switch",this.$el);var e;this.targets?1==this.targets.length?(e=this.targets[0],this.self||(e=e.add(this.$el)),e.addClass(this.className)):this.targets.length>1&&(e=this.targets[0],this.self||(e=e.add(this.$el)),e.addClass(this.className),this.targets[1].removeClass(this.className)):this.$el.addClass(this.className),t&&"function"==typeof t&&t.apply(this)},Gumby.addInitalisation("toggles",function(i){t(".toggle").each(function(){var n=t(this);return n.data("isToggle")&&!i?!0:(n.data("isToggle")&&i&&n.trigger("gumby.initialize"),n.data("isToggle",!0),new e(n),void 0)})}),Gumby.addInitalisation("switches",function(e){t(".switch").each(function(){var n=t(this);return n.data("isSwitch")&&!e?!0:n.data("isSwitch")&&e?(n.trigger("gumby.initialize"),!0):(n.data("isSwitch",!0),new i(n),void 0)})}),Gumby.UIModule({module:"toggleswitch",events:["initialize","trigger","onTrigger"],init:function(){Gumby.initialize("switches"),Gumby.initialize("toggles")}})}(jQuery),!function(t){"use strict";function e(t,e){Gumby&&Gumby.debug("Initializing Validation",t),this.$this=t,this.$field=this.$this.parents(".field"),this.req=e||function(){return!!this.$this.val().length};var i=this;this.$this.is("[type=checkbox], [type=radio]")?(this.$field=this.$this.parent("label"),this.$field.on("gumby.onChange",function(){i.validate()})):this.$this.is("select")?(this.$field=this.$this.parents(".picker"),this.$field.on("change",function(){i.validate()})):this.$this.on("blur",function(t){9!==t.which&&i.validate()})}e.prototype.validate=function(){var t=this.req(this.$this);return t?this.$field.removeClass("danger").addClass("success"):this.$field.removeClass("success").addClass("danger"),t},t.fn.validation=function(i){var n=t.extend({submit:!1,fail:!1,required:[]},i),o=[];return this.each(function(){if(!n.required.length)return!1;var i,s=t(this),r=n.required.length;for(i=0;r>i;i++)o.push(new e(s.find('[name="'+n.required[i].name+'"]'),n.required[i].validate||!1));s.on("submit",function(t){var e=!1;if(!s.data("passed")){t.preventDefault();var i,r=o.length;for(i=0;r>i;i++)o[i].validate()||(e=!0);if(e){if(n.fail&&"function"==typeof n.fail)return n.fail(),void 0}else{if(n.submit&&"function"==typeof n.submit)return n.submit(s.serializeArray()),void 0;s.data("passed",!0).submit()}}})})}}(jQuery),!function(t){"use strict";Gumby.touchDevice&&Gumby.touchEvents||!Gumby.autoInit?Gumby.touchEvents&&Gumby.touchDevice&&(Gumby.debug("Loading jQuery mobile touch events"),yepnope.errorTimeout=2e3,Modernizr.load({test:Modernizr.touch,yep:Gumby.touchEvents+"/jquery.mobile.custom.min.js",complete:function(){t.mobile||Gumby.error("Error loading jQuery mobile touch events"),Gumby.touchEventsLoaded=!0,Gumby.autoInit?window.Gumby.init():Gumby.uiModulesReady&&Gumby.helpers()}})):window.Gumby.init(),"function"==typeof define&&define.amd&&define(window.Gumby)}(jQuery),window.Modernizr=function(t,e,i){function n(t){g.cssText=t}function o(t,e){return typeof t===e}var s,r,a,u="2.6.2",l={},c=!0,h=e.documentElement,d="modernizr",f=e.createElement(d),g=f.style,p=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),m={},y=[],b=y.slice,v=function(t,i,n,o){var s,r,a,u,l=e.createElement("div"),c=e.body,f=c||e.createElement("body");if(parseInt(n,10))for(;n--;)a=e.createElement("div"),a.id=o?o[n]:d+(n+1),l.appendChild(a);return s=["&#173;",'<style id="s',d,'">',t,"</style>"].join(""),l.id=d,(c?l:f).innerHTML+=s,f.appendChild(l),c||(f.style.background="",f.style.overflow="hidden",u=h.style.overflow,h.style.overflow="hidden",h.appendChild(f)),r=i(l,t),c?l.parentNode.removeChild(l):(f.parentNode.removeChild(f),h.style.overflow=u),!!r},$={}.hasOwnProperty;a=o($,"undefined")||o($.call,"undefined")?function(t,e){return e in t&&o(t.constructor.prototype[e],"undefined")}:function(t,e){return $.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var i=b.call(arguments,1),n=function(){if(this instanceof n){var o=function(){};o.prototype=e.prototype;var s=new o,r=e.apply(s,i.concat(b.call(arguments)));return Object(r)===r?r:s}return e.apply(t,i.concat(b.call(arguments)))};return n}),m.touch=function(){var i;return"ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch?i=!0:v(["@media (",p.join("touch-enabled),("),d,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(t){i=9===t.offsetTop}),i};for(var w in m)a(m,w)&&(r=w.toLowerCase(),l[r]=m[w](),y.push((l[r]?"":"no-")+r));return l.addTest=function(t,e){if("object"==typeof t)for(var n in t)a(t,n)&&l.addTest(n,t[n]);else{if(t=t.toLowerCase(),l[t]!==i)return l;e="function"==typeof e?e():e,"undefined"!=typeof c&&c&&(h.className+=" "+(e?"":"no-")+t),l[t]=e}return l},n(""),f=s=null,function(t,e){function i(t,e){var i=t.createElement("p"),n=t.getElementsByTagName("head")[0]||t.documentElement;return i.innerHTML="x<style>"+e+"</style>",n.insertBefore(i.lastChild,n.firstChild)}function n(){var t=y.elements;return"string"==typeof t?t.split(" "):t}function o(t){var e=m[t[g]];return e||(e={},p++,t[g]=p,m[p]=e),e}function s(t,i,n){if(i||(i=e),c)return i.createElement(t);n||(n=o(i));var s;return s=n.cache[t]?n.cache[t].cloneNode():f.test(t)?(n.cache[t]=n.createElem(t)).cloneNode():n.createElem(t),s.canHaveChildren&&!d.test(t)?n.frag.appendChild(s):s}function r(t,i){if(t||(t=e),c)return t.createDocumentFragment();i=i||o(t);for(var s=i.frag.cloneNode(),r=0,a=n(),u=a.length;u>r;r++)s.createElement(a[r]);return s}function a(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(i){return y.shivMethods?s(i,t,e):e.createElem(i)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+n().join().replace(/\w+/g,function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'})+");return n}")(y,e.frag)}function u(t){t||(t=e);var n=o(t);return y.shivCSS&&!l&&!n.hasCSS&&(n.hasCSS=!!i(t,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),c||a(t,n),t}var l,c,h=t.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g="_html5shiv",p=0,m={};!function(){try{var t=e.createElement("a");t.innerHTML="<xyz></xyz>",l="hidden"in t,c=1==t.childNodes.length||function(){e.createElement("a");var t=e.createDocumentFragment();return"undefined"==typeof t.cloneNode||"undefined"==typeof t.createDocumentFragment||"undefined"==typeof t.createElement}()}catch(i){l=!0,c=!0}}();var y={elements:h.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:h.shivCSS!==!1,supportsUnknownElements:c,shivMethods:h.shivMethods!==!1,type:"default",shivDocument:u,createElement:s,createDocumentFragment:r};t.html5=y,u(e)}(this,e),l._version=u,l._prefixes=p,l.testStyles=v,h.className=h.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(c?" js "+y.join(" "):""),l}(this,this.document),function(t,e,i){function n(t){return"[object Function]"==m.call(t)}function o(t){return"string"==typeof t}function s(){}function r(t){return!t||"loaded"==t||"complete"==t||"uninitialized"==t}function a(){var t=y.shift();b=1,t?t.t?g(function(){("c"==t.t?d.injectCss:d.injectJs)(t.s,0,t.a,t.x,t.e,1)},0):(t(),a()):b=0}function u(t,i,n,o,s,u,l){function c(e){if(!f&&r(h.readyState)&&(v.r=f=1,!b&&a(),h.onload=h.onreadystatechange=null,e)){"img"!=t&&g(function(){w.removeChild(h)},50);for(var n in A[i])A[i].hasOwnProperty(n)&&A[i][n].onload()}}var l=l||d.errorTimeout,h=e.createElement(t),f=0,m=0,v={t:n,s:i,e:s,a:u,x:l};1===A[i]&&(m=1,A[i]=[]),"object"==t?h.data=i:(h.src=i,h.type=t),h.width=h.height="0",h.onerror=h.onload=h.onreadystatechange=function(){c.call(this,m)},y.splice(o,0,v),"img"!=t&&(m||2===A[i]?(w.insertBefore(h,$?null:p),g(c,l)):A[i].push(h))}function l(t,e,i,n,s){return b=0,e=e||"j",o(t)?u("c"==e?E:G,t,e,this.i++,i,n,s):(y.splice(this.i++,0,t),1==y.length&&a()),this}function c(){var t=d;return t.loader={load:l,i:0},t}var h,d,f=e.documentElement,g=t.setTimeout,p=e.getElementsByTagName("script")[0],m={}.toString,y=[],b=0,v="MozAppearance"in f.style,$=v&&!!e.createRange().compareNode,w=$?f:p.parentNode,f=t.opera&&"[object Opera]"==m.call(t.opera),f=!!e.attachEvent&&!f,G=v?"object":f?"script":"img",E=f?"script":G,C=Array.isArray||function(t){return"[object Array]"==m.call(t)},T=[],A={},M={timeout:function(t,e){return e.length&&(t.timeout=e[0]),t}};d=function(t){function e(t){var e,i,n,t=t.split("!"),o=T.length,s=t.pop(),r=t.length,s={url:s,origUrl:s,prefixes:t};for(i=0;r>i;i++)n=t[i].split("="),(e=M[n.shift()])&&(s=e(s,n));for(i=0;o>i;i++)s=T[i](s);return s}function r(t,o,s,r,a){var u=e(t),l=u.autoCallback;u.url.split(".").pop().split("?").shift(),u.bypass||(o&&(o=n(o)?o:o[t]||o[r]||o[t.split("/").pop().split("?")[0]]),u.instead?u.instead(t,o,s,r,a):(A[u.url]?u.noexec=!0:A[u.url]=1,s.load(u.url,u.forceCSS||!u.forceJS&&"css"==u.url.split(".").pop().split("?").shift()?"c":i,u.noexec,u.attrs,u.timeout),(n(o)||n(l))&&s.load(function(){c(),o&&o(u.origUrl,a,r),l&&l(u.origUrl,a,r),A[u.url]=2})))}function a(t,e){function i(t,i){if(t){if(o(t))i||(h=function(){var t=[].slice.call(arguments);d.apply(this,t),f()}),r(t,h,e,0,l);else if(Object(t)===t)for(u in a=function(){var e,i=0;for(e in t)t.hasOwnProperty(e)&&i++;return i}(),t)t.hasOwnProperty(u)&&(!i&&!--a&&(n(h)?h=function(){var t=[].slice.call(arguments);d.apply(this,t),f()}:h[u]=function(t){return function(){var e=[].slice.call(arguments);t&&t.apply(this,e),f()}}(d[u])),r(t[u],h,e,u,l))}else!i&&f()}var a,u,l=!!t.test,c=t.load||t.both,h=t.callback||s,d=h,f=t.complete||s;i(l?t.yep:t.nope,!!c),c&&i(c)}var u,l,h=this.yepnope.loader;if(o(t))r(t,0,h,0);else if(C(t))for(u=0;u<t.length;u++)l=t[u],o(l)?r(l,0,h,0):C(l)?d(l):Object(l)===l&&a(l,h);else Object(t)===t&&a(t,h)},d.addPrefix=function(t,e){M[t]=e},d.addFilter=function(t){T.push(t)},d.errorTimeout=1e4,null==e.readyState&&e.addEventListener&&(e.readyState="loading",e.addEventListener("DOMContentLoaded",h=function(){e.removeEventListener("DOMContentLoaded",h,0),e.readyState="complete"},0)),t.yepnope=c(),t.yepnope.executeStack=a,t.yepnope.injectJs=function(t,i,n,o,u,l){var c,h,f=e.createElement("script"),o=o||d.errorTimeout;f.src=t;for(h in n)f.setAttribute(h,n[h]);i=l?a:i||s,f.onreadystatechange=f.onload=function(){!c&&r(f.readyState)&&(c=1,i(),f.onload=f.onreadystatechange=null)},g(function(){c||(c=1,i(1))},o),u?f.onload():p.parentNode.insertBefore(f,p)},t.yepnope.injectCss=function(t,i,n,o,r,u){var l,o=e.createElement("link"),i=u?a:i||s;o.href=t,o.rel="stylesheet",o.type="text/css";for(l in n)o.setAttribute(l,n[l]);r||(p.parentNode.insertBefore(o,p),g(i,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},function(){var t=new Image;t.onerror=function(){Modernizr.addTest("webp",!1)},t.onload=function(){Modernizr.addTest("webp",function(){return 1==t.width})},t.src="data:image/webp;base64,UklGRiwAAABXRUJQVlA4ICAAAAAUAgCdASoBAAEAL/3+/3+CAB/AAAFzrNsAAP5QAAAAAA=="}(),!function(){"use strict";function t(t){Gumby.debug("Initializing Parallax",t),this.$el=t,this.$holder={},this.ratio=this.offset=0;var e=this;this.setup(),this.$el.on("gumby.initialize",function(){Gumby.debug("Re-initializing Parallax",e.$el),e.setup()}),this.setPosition(),this.$holder.scroll(function(){e.scroll()}),this.scroll()}Gumby.gumbyTouch||(t.prototype.setup=function(){this.$holder=Gumby.selectAttr.apply(this.$el,["holder"]),this.ratio=Number(Gumby.selectAttr.apply(this.$el,["parallax"]))||1,this.offset=Number(Gumby.selectAttr.apply(this.$el,["offset"]))||0,this.xPos=this.$el.css("backgroundPosition").split(" ")[0],this.xPos&&"0%"!==this.xPos||(this.xPos="50%"),this.startPos=(this.$el.offset().top-this.offset)*this.ratio,this.$holder&&(this.$holder=$(this.$holder)),this.$holder&&this.$holder.length?this.startPos-=this.$holder.offset().top:this.$holder=$(window)},t.prototype.scroll=function(){this.setPosition(this.startPos-this.$holder.scrollTop()*this.ratio)},t.prototype.setPosition=function(t){this.$el.css("backgroundPosition",this.xPos+" "+t+"px")},Gumby.addInitalisation("parallax",function(){$(".parallax").each(function(){var e=$(this);return e.data("isParallax")?!0:(e.data("isParallax",!0),new t(e),void 0)})}),Gumby.UIModule({module:"parallax",events:[],init:function(){Gumby.initialize("parallax")}}))}();
//# sourceMappingURL=gumby.js.map